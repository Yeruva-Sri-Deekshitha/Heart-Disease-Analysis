{
  "kind": "build_request",
  "title": "Fix: Dashboard charts not loading — no data displayed",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-11",
      "text": "Diagnose and fix the data loading issue causing the dashboard charts to render empty. Verify that the backend actor is correctly initialized and reachable from the frontend, that the `useFilteredPatients` and related React Query hooks in `frontend/src/hooks/useQueries.ts` are receiving a valid actor instance from `useActor`, and that the query functions are properly awaiting and returning data. Ensure error and loading states are handled so that failures surface visibly rather than silently showing blank chart areas.",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "I am not getting any results"
        ]
      },
      "acceptanceCriteria": [
        "On page load, the dashboard displays populated charts (bar charts, scatter plots, pie charts) with data drawn from the synthetic 500-patient dataset.",
        "The filter panel controls (age range, gender, race, diabetes, stroke) update all charts when changed.",
        "If the backend call fails, a visible error message or retry prompt is shown instead of blank chart cards.",
        "The Data Explorer table also loads and displays patient records without requiring a page refresh."
      ]
    },
    {
      "id": "REQ-12",
      "text": "Ensure the Motoko backend actor in `backend/main.mo` correctly initializes and exposes the synthetic 500-patient dataset on canister startup. Verify that the `getFilteredPatients`, `getAllPatients`, `getDatasetConfig`, and `getDatasetSize` query functions return well-formed, non-empty responses. If the dataset generation logic runs in a postupgrade or init hook, confirm it executes reliably so that query calls made immediately after deployment return data.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "I am not getting any results"
        ]
      },
      "acceptanceCriteria": [
        "Calling `getDatasetSize` returns 500.",
        "Calling `getFilteredPatients` with no filters returns an array of 500 patient records.",
        "Calling `getAllPatients` returns all patient records.",
        "Dataset is populated at canister initialization without requiring manual intervention."
      ]
    }
  ],
  "constraints": [
    "Do not change the visual design, layout, or chart configurations — only fix the data-loading pipeline.",
    "Do not modify files listed in frontend.immutablePaths: useInternetIdentity.ts, useActor.ts, main.tsx, or components/ui.",
    "Preserve all existing routes: Dashboard, Data Story, and Data Explorer."
  ],
  "nonGoals": [
    "Adding new charts or visualizations.",
    "Changing the filter panel UI.",
    "Modifying the healthcare visual theme or layout.",
    "Adding authentication or Internet Identity gating to data queries."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}